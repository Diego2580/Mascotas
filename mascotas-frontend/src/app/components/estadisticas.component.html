<div class="container mt-4">
  <h1 class="mb-4">Estadísticas del Sistema</h1>

  <!-- Error -->
  <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
    {{ error }}
    <button type="button" class="btn-close" (click)="error = null"></button>
  </div>

  <!-- Cargando -->
  <div *ngIf="cargando" class="alert alert-info">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    Cargando estadísticas...
  </div>

  <!-- Promedio General -->
  <div *ngIf="promedioEdadGeneral && !cargando" class="row mb-4">
    <div class="col-md-12">
      <div class="card border-primary">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">Promedio de Edad General</h5>
        </div>
        <div class="card-body text-center">
          <h2 class="text-primary">{{ promedioEdadGeneral.promedio | number: '1.1-2' }} años</h2>
          <p class="text-muted">{{ promedioEdadGeneral.message }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Estadísticas por Especie -->
  <div *ngIf="tieneEstadisticas && !cargando" class="row mb-4">
    <div class="col-md-12">
      <h3 class="mb-3">Promedio de Edad por Especie</h3>
    </div>
    <div class="col-md-6 mb-4" *ngFor="let especie of especies">
      <div *ngIf="obtenerEstadisticaEspecie(especie) as estadistica" class="card">
        <div class="card-body">
          <h6 class="card-title text-muted">{{ especie }}</h6>
          <h3 class="text-success">{{ estadistica.promedio | number: '1.1-2' }} años</h3>
          <small class="text-muted">{{ estadistica.message }}</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Sin datos -->
  <div *ngIf="!tieneEstadisticas && !cargando" class="alert alert-warning">
    No hay datos disponibles. Crea mascotas para ver las estadísticas.
  </div>
</div>
